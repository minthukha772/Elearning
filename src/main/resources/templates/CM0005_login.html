<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="UTF-8" />
  <meta http-equiv="X-UA-Compatible" content="IE=edge" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
 
  <link rel="stylesheet" th:href="@{/css/CM0005_login.css}" />
  <link rel="stylesheet" th:href="@{/css/bootstrap.css}" />
  <title>Login</title>
</head>

<body>
  <div th:replace="fragments/guestnav"></div>

  <!--     <div sec:authorize="isAuthenticated()">
      Welcome <b><span sec:authentication="name">Username</span></b>
      <i><span sec:authentication="principal.authorities">Roles</span></i>
    </div> -->

  <div class="container-custom">
    <div class="card mt-5">
      <div class="card-header">Login</div>
      <div class="card-body">
        <div class="container">
          <form id="contactForm" th:action="@{/sign_in}" th:object="${userInfo}" method="post">
            <!--   -->
            <div th:if="${error != null}" class="alert alert-danger fade show" role="alert">
              <span class="text-danger" th:text="${error}"></span>
            </div>
            <div th:if="${success != null}" class="alert alert-success fade show" role="alert">
              <span th:text="${success}"></span>
            </div>
            <div th:if="${message != null}" class="alert alert-success fade show" role="alert">
              <span th:text="${message}"></span>
            </div>

            <div>
              <div class="mb-3 has-validation">
                <label class="form-label" for="emailAddress">
                  Email Address</label>
                <input th:field="*{email}" class="form-control" id="email" type="email"
                  th:classappend="${#fields.hasErrors('email')}?'is-invalid':''" placeholder="e.g. john@gmail.com" />
                <div class="invalid-feedback" th:if="${#fields.hasErrors('email')}" th:errors="*{email}">
                  This field is required.
                </div>
              </div>

              <div class="mb-3">
                <label class="form-label" for="password">Password</label>
                <span th:text="*{password}" class="invisible"></span>
                <input th:field="*{password}" th:attr="data-value=*{password}" class="form-control" id="password"
                  type="password" automplete="new-password" placeholder="ExamplePassword001" />
                <div class="invalid-feedback" th:if="${#fields.hasErrors('password')}" th:errors="*{password}"></div>
              </div>

              <div class="row justify-content-between">
                <a th:href="@{/check_email/reset_password}" class="col-auto btn btn-link" id="forgetPassword" type="submit"
                  name="action" value="forget">
                  Forget Password
                </a>

                <button class="btn btn-primary col-auto" id="submitButton" type="submit" name="action" value="login">
                  Login
                </button>
              </div>
            </div>
          </form>
        </div>
      </div>
      <!-- End of Card Body -->
    </div>
    <!---End of Card-->
  </div>
  <!-- End of Container -->

  <div th:replace="@{fragments/footer}"></div>

  <script th:inline="javascript">
    const uri = /*[[@{__${#httpServletRequest.requestURI}__}]]*/ "uri    ";
    const serverContext = /*[[@{/}]]*/ "/";
  </script>

  <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.0.2/dist/js/bootstrap.bundle.min.js"
    integrity="sha384-MrcW6ZMFYlzcLA8Nl+NtUVF0sA7MsXsP1UyJoMp4YLEuNSfAP+JcXn/tWtIaxVXM"
    crossorigin="anonymous"></script>
  <script src="https://code.jquery.com/jquery-3.6.0.min.js"
    integrity="sha256-/xUj+3OJU5yExlq6GSYGSHk7tPXikynS7ogEvDej/m4=" crossorigin="anonymous"></script>
  <script th:src="@{\js\CM0005_login.js}"></script>
</body>

</html>