<!DOCTYPE html>
<html lang="en">
<html xmlns="http://www.w3.org/1999/xhtml" xmlns:th="http://www.thymeleaf.org"
    xmlns:layout="http://www.ultraq.net.nz/thymeleaf/layout"
    xmlns:sec="http://www.thymeleaf.org/thymeleaf-extrasspringsecurity4">

<head>
    <meta charset="utf-8">
    <!-- <link rel="shortcut icon" type="image/ico" href="http://www.datatables.net/favicon.ico"> -->
    <meta name="viewport" content="width=device-width, initial-scale=1, minimum-scale=1.0, user-scalable=no">
    <title>Mapping Site</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.0.2/dist/css/bootstrap.min.css" rel="stylesheet"
        integrity="sha384-EVSTQN3/azprG1Anm3QDgpJLIm9Nao0Yz1ztcQTwFspd3yD65VohhpuuCOmLASjC" crossorigin="anonymous">
    <link rel="stylesheet" type="text/css" href="css/dataTables.bootstrap5.css">
    <link rel="stylesheet" type="text/css" href="css/shCore.css">
    <link rel="stylesheet" type="text/css" href="css/demo.css">
    <link rel="stylesheet" type="text/css" href="css/AD0003_PaymentList.css">



    <title>Mapping Site</title>

    <script type="text/javascript" language="javascript" src="https://code.jquery.com/jquery-3.5.1.js"></script>
    <script type="text/javascript" language="javascript" src="js/jquery.dataTables.js"></script>
    <script type="text/javascript" language="javascript" src="js/dataTables.bootstrap5.js"></script>
    <script type="text/javascript" language="javascript" src="js/shCore.js"></script>
    <script type="text/javascript" language="javascript" src="js/demo.js"></script>
    <script type="text/javascript" language="javascript" class="init">

        $(document).ready(function () {
            var t = $('name').DataTable({
                "columnDefs": [{
                    "searchable": false,
                    "orderable": false,
                    "targets": -1,
                    "data": null,
                    "defaultContent": "<a href='/test' class='btn btn-primary' style='float: center;background-color: #5239CC;'>Payment Details</a>"
                }],
                "order": [
                    [1, 'asc']
                ],
                "dom": '<"top"f>rt<"bottom"lp><"clear">', // Positions table elements
                dom: 'lrtip'

            });

            // Search Box
            $("#mySearchButton").on("keyup click", function () {
                t.search($("#mySearchText").val()).draw();
            });

            $('#payment_status').on('change', function () {
                t.search(this.value).draw();
            });

            $('#mySearchButton').click(function () {
                t.column(1).search($('#column_search:selected').val());
                // other columns filters similarly
                t.draw();
            })

            $('#column_search').on('change', function () {
                value = $('#column_search:selected').val();
                console.log($('#column_search:selected').val());
                console.log(value);
                if (value == 1) {
                    $("#mySearchButton").on("keyup click", function () {
                        t.column(1).search($("#mySearchText").val()).draw();
                        t.column(2).searchable = false;
                        // t.column(2).searchable(false);
                    });
                    // t.column(1).search(this.value).draw();
                }
                else if (value == 2) {
                    $("#mySearchButton").on("keyup click", function () {
                        t.column(2).search($("#mySearchText").val()).draw();
                        t.column(1).searchable = false;
                        // t.column(1).searchable(false);
                    });
                    // t.column(2).search(this.value).draw();
                }
            });


            // Yay it's ok
            $("#mySearchText").on("keyup search input paste cut", function () {
                t.search(this.value).draw();
            });
            //Yay it's ok

            t.on('order.dt search.dt', function () {
                t.column(0, { search: 'applied', order: 'applied' }).nodes().each(function (cell, i) {
                    cell.innerHTML = i + 1;
                });
            }).draw();
        });




    </script>

</head>

<body>
    <div style="position: relative;">


        <div id="main" style="margin-left: 250px;">
            <span class="fas fa-bars openbtn" id="sidebutton" onclick="openNav()"
                style="display: none;float: left;"></span>
            <header class="header navbar-light bg-light" id="header">
                <a class="navbar-brand" href="#" style="float: left;left: 0;top: 0;">Mapping Site</a>
                <div class="header_img">
                    <img src="images/admin_profile.jpg" alt="people-profile" onclick="location.href='/test'">
                </div>
            </header>

            <nav aria-label="breadcrumb" class="bg-light" style="padding: 0 10px;">
                <ol class="breadcrumb">
                    <li class="breadcrumb-item"><a href="#">Top</a></li>
                    <li class="breadcrumb-item active" aria-current="page">Payment List</li>
                </ol>
            </nav>

            <div class="col-sm-9">

            </div>


            <div class="container mx-auto" style="max-width: 1000px;">
                <div class="col-lg-7">
                    <div class="input-group mb-3">


                        <input type="text" class="form-control" id="mySearchText" placeholder="Search in Payment List"
                            aria-label="Search in Payment List" aria-describedby="mySearchButton">
                        <button class="btn btn-outline-secondary fw-bold" id="mySearchButton"
                            type="button">Search</button>
                    </div>
                </div>


                <div class="card mx-auto p-3" style="max-width: 1000px;">
                    <div class="card-body">
                        <section>
                            <div class="demo-html">
                                <table id="example" class="table table-striped" style="width:100%">
                                    <thead>
                                        <tr>
                                            <th>No</th>
                                            <th>Name</th>
                                            <th>Phone Number</th>
                                            <th>Add student</th>

                                            <th></th>

                                        </tr>
                                    </thead>
                                    <tbody>
                                        <tr th:each="student:${students}">
                                            <td></td>
                                            <td th:text="${student.userName}"></td>

                                            <td th:text="${student.phoneNo}"></td>
                                            <td>
                                                <text
                                                    th:text="@{__${#httpServletRequest.requestURI}__/enroll/__${student.uid}__}"></text>
                                                <!-- <form id="enrollstudent"
                                                    th:action="@{__${#httpServletRequest.requestURI}__/enroll/__*{student.uid}__}"
                                                    th:object="${id}" method="post">
                                                    <input type="hidden" th:value="${student.uid}" id="uid"
                                                        name="uid" />
                                                  
                                                </form> -->
                                                <button
                                                    th:attr="onclick=|Enrollstudent('${student.uid}')|">+Enroll</button>
                                            </td>


                                        </tr>
                                    </tbody>

                                </table>
                            </div>
                        </section>
                    </div>
                </div>


            </div>

        </div>
    </div>


    <footer>
        <section class="justify-content-center justify-content-lg-between border-bottom">
            <div class="container text-center text-md-start mt-5">
                <!-- Grid row -->
                <div class="row mt-3">
                    <!-- Grid column -->
                    <div class="col-md-3 col-lg-4 col-xl-3 mx-auto mb-4">
                        <!-- Content -->
                        <h6 class="text-uppercase fw-bold mb-4 footerhead">
                            Address
                        </h6>
                        <p class="footertext">
                            Building “16/6” Bawzin Street, Thuwanna Lann Sone Bus Stop, Thingangyun Township .
                        </p>
                    </div>
                    <!-- Grid column -->

                    <!-- Grid column -->
                    <div class="col-md-4 col-lg-3 col-xl-3 mx-auto mb-md-0 mb-4">
                        <!-- Links -->
                        <h6 class="text-uppercase fw-bold mb-4 footerhead">
                            Contact Us
                        </h6>
                        <p class="footertext"><i class="fas fa-envelope me-3"></i>Email : someone@bliss-stock.com</p>
                        <p class="footertext"><i class="fas fa-phone me-3"></i>Phone: +959 259 123 123</p>
                    </div>
                    <!-- Grid column -->


                </div>
                <!-- Grid row -->
            </div>
        </section>
        <p>© 2021 BlissStock,Ltd. All rights reserved</p>
    </footer>

    <script>
        function openNav() {
            document.getElementById("mySidebar").style.width = "250px";
            document.getElementById("main").style.marginLeft = "250px";
            document.getElementById("sidebutton").style.display = "none";
            document.getElementById("mySidebar").style.position = "fixed";
        }

        function closeNav() {
            document.getElementById("mySidebar").style.width = "0";
            document.getElementById("main").style.marginLeft = "0";
            document.getElementById("sidebutton").style.display = "block";
            document.getElementById("sidebutton").style.width = "5px";
        }


        function Enrollstudent(uid) {
            console.log(window.location.href + "/enroll/" + uid);
            if (confirm("Do you want to enroll this student?")) {
                console.log(window.location.href + "/enroll/" + uid, "_self");
                window.open(window.location.href + "/enroll/" + uid, "_self")

            } else {

            }
        }
        var $scrollingDiv = $("#mySidebar");

        $(window).scroll(function () {
            var y = $(this).scrollTop(),
                maxY = $('#footer').offset().top,
                scrollHeight = $scrollingDiv.height();

            if (y < maxY - scrollHeight) {
                $scrollingDiv
                    .stop()
                    .animate({ "marginTop": ($(window).scrollTop()) + "px" }, "slow");
            }
        });

    </script>

</body>

</html>